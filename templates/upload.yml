parameters:
  feed: ''

steps:
- ${{ if ne(parameters.feed, '') }}:
  - task: TwineAuthenticate@1
    displayName: Twine authenticate
    inputs:
      artifactFeed: ${{ parameters.feed }}
  - script: >-
     python -m twine upload -r "${{ parameters.feed }}" --skip-existing
     --config-file "$(PYPIRC_PATH)" `ls -t dist/*.whl | head -n1`
    displayName: 'Upload using Twine'
